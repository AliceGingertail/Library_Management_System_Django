{% extends 'student_navbar.html' %}

{% block title %} Редактирование профиля {% endblock %}

{% block css %}
<style>
.edit-profile-container {
    max-width: 800px;
    margin: 30px auto;
    padding: 30px;
    background: white;
    border-radius: 15px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
}
.form-label {
    font-weight: 600;
    color: #555;
}
.btn-update {
    background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    border: none;
    color: white;
    padding: 12px 40px;
    font-weight: 600;
}
.btn-update:hover {
    background: linear-gradient(135deg, #0e8474 0%, #2ec96a 100%);
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
</style>
{% endblock %}

{% block body %}
<div class="container">
    <div class="edit-profile-container">
        <h2 class="text-center mb-4">
            <i class="fas fa-user-edit"></i> Редактирование профиля
        </h2>
        <form method="POST"> {% csrf_token %}
            <div class="row mt-4">
                <div class="form-group col-md-6 mb-3">
                    <label class="form-label"><i class="fas fa-envelope"></i> Email</label>
                    <input type="email" class="form-control" name="email" value="{{user.email}}" required>
                </div>
                <div class="form-group col-md-6 mb-3">
                    <label class="form-label"><i class="fas fa-phone"></i> Телефон</label>
                    <input type="text" class="form-control" name="phone" value="{{user.student.phone}}" placeholder="+7 (XXX) XXX-XX-XX">
                </div>
            </div>

            <div class="row mt-3">
                <div class="form-group col-md-6 mb-3">
                    <label class="form-label"><i class="fas fa-building"></i> Филиал</label>
                    <select class="form-control" name="branch">
                        <option value="">Выберите филиал</option>
                        {% for b in branches %}
                            <option value="{{b.id}}" {% if user.student.branch.id == b.id %}selected{% endif %}>
                                {{b.name}}
                            </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="form-group col-md-6 mb-3">
                    <label class="form-label"><i class="fas fa-graduation-cap"></i> Класс</label>
                    <select class="form-control" name="classroom">
                        <option value="">Выберите класс</option>
                        {% for i in "123456789" %}
                            <option value="{{i}}" {% if user.student.classroom == i %}selected{% endif %}>{{i}} класс</option>
                        {% endfor %}
                        <option value="10" {% if user.student.classroom == "10" %}selected{% endif %}>10 класс</option>
                        <option value="11" {% if user.student.classroom == "11" %}selected{% endif %}>11 класс</option>
                    </select>
                </div>
            </div>

            <div class="row mt-3">
                <div class="form-group col-md-6 mb-3">
                    <label class="form-label"><i class="fas fa-sort-numeric-up"></i> Номер</label>
                    <input type="text" class="form-control" name="roll_no" value="{{user.student.roll_no}}">
                </div>
            </div>

            <div class="text-center mt-4">
                <button type="submit" class="btn btn-update">
                    <i class="fas fa-save"></i> Сохранить изменения
                </button>
            </div>
        </form>
    </div>
</div>

{% endblock %}

{% block js %}
<script>
    {% if alert %}
    alert("Профиль успешно обновлен!");
    document.location = "/profile";
    {% endif %}
</script>
{% endblock %}
